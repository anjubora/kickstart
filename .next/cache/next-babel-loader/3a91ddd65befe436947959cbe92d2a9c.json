{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Table, Button } from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport Campaign from '../ethereum/campaign';\n\nclass RequestRow extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onApprove\", async event => {\n      const {\n        address\n      } = this.props;\n      const accounts = await web3.eth.getAccounts();\n      const campaign = Campaign(address);\n      await campaign.methods.approveRequest(this.props.id).send({\n        from: accounts[0]\n      });\n    });\n\n    _defineProperty(this, \"onFinalize\", async event => {\n      const {\n        address\n      } = this.props;\n      const accounts = await web3.eth.getAccounts();\n      const campaign = Campaign(address);\n      await campaign.methods.finalizeRequest(this.props.id).send({\n        from: accounts[0]\n      });\n    });\n  }\n\n  static async getInitialProps(props) {\n    const {\n      address\n    } = props.query;\n    return {\n      address\n    };\n  }\n\n  render() {\n    const {\n      Row,\n      Cell\n    } = Table;\n    const {\n      id,\n      request,\n      approversCount\n    } = this.props;\n    const readyToFinalize = request.approvalCount > approversCount / 2;\n    return __jsx(Row, {\n      disabled: request.complete,\n      positive: readyToFinalize && !request.complete\n    }, __jsx(Cell, null, id), __jsx(Cell, null, request.description), __jsx(Cell, null, request.description), __jsx(Cell, null, web3.utils.fromWei(request.value, 'ether')), __jsx(Cell, null, `${request.approvalCount}/${approversCount}`), __jsx(Cell, null, request.complete ? null : __jsx(Button, {\n      basic: true,\n      color: \"green\",\n      onClick: this.onApprove\n    }, \"Approve\")), __jsx(Cell, null, request.complete ? null : __jsx(Button, {\n      basic: true,\n      color: \"pink\",\n      onClick: this.onFinalize\n    }, \"Finalize\")));\n  }\n\n}\n\nexport default RequestRow;","map":{"version":3,"sources":["/home/anju/sol/kickstart/components/RequestRow.js"],"names":["React","Component","Table","Button","web3","Campaign","RequestRow","event","address","props","accounts","eth","getAccounts","campaign","methods","approveRequest","id","send","from","finalizeRequest","getInitialProps","query","render","Row","Cell","request","approversCount","readyToFinalize","approvalCount","complete","description","utils","fromWei","value","onApprove","onFinalize"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,SAAQC,KAAR,EAAcC,MAAd,QAA2B,mBAA3B;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,QAAP,MAAqB,sBAArB;;AAEA,MAAMC,UAAN,SAAyBL,SAAzB,CAAkC;AAAA;AAAA;;AAAA,uCAOpB,MAAOM,KAAP,IAAe;AAErB,YAAM;AAACC,QAAAA;AAAD,UAAU,KAAKC,KAArB;AACA,YAAMC,QAAQ,GAAC,MAAMN,IAAI,CAACO,GAAL,CAASC,WAAT,EAArB;AACA,YAAMC,QAAQ,GAACR,QAAQ,CAACG,OAAD,CAAvB;AACA,YAAMK,QAAQ,CAACC,OAAT,CAAiBC,cAAjB,CAAgC,KAAKN,KAAL,CAAWO,EAA3C,EAA+CC,IAA/C,CACF;AACIC,QAAAA,IAAI,EAAER,QAAQ,CAAC,CAAD;AADlB,OADE,CAAN;AAQJ,KApB8B;;AAAA,wCAsBpB,MAAOH,KAAP,IAAe;AAEzB,YAAM;AAACC,QAAAA;AAAD,UAAU,KAAKC,KAArB;AACA,YAAMC,QAAQ,GAAC,MAAMN,IAAI,CAACO,GAAL,CAASC,WAAT,EAArB;AACA,YAAMC,QAAQ,GAACR,QAAQ,CAACG,OAAD,CAAvB;AACA,YAAMK,QAAQ,CAACC,OAAT,CAAiBK,eAAjB,CAAiC,KAAKV,KAAL,CAAWO,EAA5C,EAAgDC,IAAhD,CACF;AACIC,QAAAA,IAAI,EAAER,QAAQ,CAAC,CAAD;AADlB,OADE,CAAN;AAMH,KAjCiC;AAAA;;AAE9B,eAAaU,eAAb,CAA6BX,KAA7B,EAAmC;AAC/B,UAAM;AAACD,MAAAA;AAAD,QAAUC,KAAK,CAACY,KAAtB;AAEA,WAAO;AAACb,MAAAA;AAAD,KAAP;AACH;;AA8BFc,EAAAA,MAAM,GAAE;AACP,UAAM;AAACC,MAAAA,GAAD;AAAKC,MAAAA;AAAL,QAAYtB,KAAlB;AACA,UAAM;AAACc,MAAAA,EAAD;AAAIS,MAAAA,OAAJ;AAAYC,MAAAA;AAAZ,QAA4B,KAAKjB,KAAvC;AACA,UAAMkB,eAAe,GAACF,OAAO,CAACG,aAAR,GAAuBF,cAAc,GAAC,CAA5D;AAGA,WACI,MAAC,GAAD;AAAK,MAAA,QAAQ,EAAED,OAAO,CAACI,QAAvB;AAAkC,MAAA,QAAQ,EAAEF,eAAe,IAAI,CAACF,OAAO,CAACI;AAAxE,OACI,MAAC,IAAD,QAAOb,EAAP,CADJ,EAEI,MAAC,IAAD,QAAOS,OAAO,CAACK,WAAf,CAFJ,EAGI,MAAC,IAAD,QAAOL,OAAO,CAACK,WAAf,CAHJ,EAII,MAAC,IAAD,QAAO1B,IAAI,CAAC2B,KAAL,CAAWC,OAAX,CAAmBP,OAAO,CAACQ,KAA3B,EAAiC,OAAjC,CAAP,CAJJ,EAKI,MAAC,IAAD,QAAQ,GAAER,OAAO,CAACG,aAAc,IAAGF,cAAe,EAAlD,CALJ,EAOI,MAAC,IAAD,QAAQD,OAAO,CAACI,QAAR,GAAkB,IAAlB,GACF,MAAC,MAAD;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,KAAK,EAAC,OAApB;AAA4B,MAAA,OAAO,EAAE,KAAKK;AAA1C,iBADN,CAPJ,EAWG,MAAC,IAAD,QAAQT,OAAO,CAACI,QAAR,GAAkB,IAAlB,GACP,MAAC,MAAD;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,KAAK,EAAC,MAApB;AAA2B,MAAA,OAAO,EAAE,KAAKM;AAAzC,kBADD,CAXH,CADJ;AAyBC;;AAnE6B;;AAuElC,eAAe7B,UAAf","sourcesContent":["import React,{Component} from 'react'\nimport {Table,Button} from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport Campaign from '../ethereum/campaign'\n\nclass RequestRow extends Component{\n\n    static async getInitialProps(props){\n        const {address}=props.query;\n       \n        return {address};\n    }\n    onApprove=async (event)=>{\n\n        const {address}=this.props;\n        const accounts=await web3.eth.getAccounts();\n        const campaign=Campaign(address);\n        await campaign.methods.approveRequest(this.props.id).send(\n            {\n                from :accounts[0]\n            }\n        )\n\n        \n    \n   }\n\n   onFinalize=async (event)=>{\n\n    const {address}=this.props;\n    const accounts=await web3.eth.getAccounts();\n    const campaign=Campaign(address);\n    await campaign.methods.finalizeRequest(this.props.id).send(\n        {\n            from :accounts[0]\n        }\n    )\n\n}\n\n\n   render(){\n    const {Row,Cell} =Table;\n    const {id,request,approversCount}=this.props;\n    const readyToFinalize=request.approvalCount>(approversCount/2)\n\n\n    return (\n        <Row disabled={request.complete}  positive={readyToFinalize && !request.complete}>\n            <Cell>{id}</Cell>\n            <Cell>{request.description}</Cell>\n            <Cell>{request.description}</Cell>\n            <Cell>{web3.utils.fromWei(request.value,'ether')}</Cell>\n            <Cell>{`${request.approvalCount}/${approversCount}`}</Cell>\n           \n            <Cell>{ request.complete? null:(\n                  <Button basic color=\"green\" onClick={this.onApprove}>Approve</Button>)\n                  }\n            </Cell>\n           <Cell>{ request.complete? null:(\n            <Button basic color=\"pink\" onClick={this.onFinalize}>Finalize</Button>)}</Cell>\n            \n           \n          \n\n          \n\n            \n        </Row>\n       \n    )\n\n    }\n\n\n}\nexport default RequestRow;"]},"metadata":{},"sourceType":"module"}