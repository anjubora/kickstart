{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Table, Button } from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport Campaign from '../ethereum/campaign';\nimport { Router } from '../routes';\n\nvar RequestRow =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RequestRow, _Component);\n\n  function RequestRow() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RequestRow);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RequestRow)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onApprove\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var address, accounts, campaign;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                address = _this.props.address;\n                _context.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accounts = _context.sent;\n                campaign = Campaign(address);\n                _context.next = 7;\n                return campaign.methods.approveRequest(_this.props.id).send({\n                  from: accounts[0]\n                });\n\n              case 7:\n                Router.pushRoute(\"/campaigns/\".concat(address, \"/requests\"));\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"onFinalize\",\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(event) {\n        var address, accounts, campaign;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                address = _this.props.address;\n                _context2.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accounts = _context2.sent;\n                campaign = Campaign(address);\n                _context2.next = 7;\n                return campaign.methods.finalizeRequest(_this.props.id).send({\n                  from: accounts[0]\n                });\n\n              case 7:\n                Router.pushRoute(\"/campaigns/\".concat(address, \"/requests\"));\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    return _this;\n  }\n\n  _createClass(RequestRow, [{\n    key: \"render\",\n    value: function render() {\n      var Row = Table.Row,\n          Cell = Table.Cell;\n      var _this$props = this.props,\n          id = _this$props.id,\n          request = _this$props.request,\n          approversCount = _this$props.approversCount;\n      var readyToFinalize = request.approvalCount > approversCount / 2;\n      return __jsx(Row, {\n        disabled: request.complete,\n        positive: readyToFinalize && !request.complete\n      }, __jsx(Cell, null, id), __jsx(Cell, null, request.description), __jsx(Cell, null, web3.utils.fromWei(request.value, 'ether')), __jsx(Cell, null, request.recepient), __jsx(Cell, null, \"\".concat(request.approvalCount, \"/\").concat(approversCount)), __jsx(Cell, null, request.complete ? null : __jsx(Button, {\n        basic: true,\n        color: \"green\",\n        onClick: this.onApprove\n      }, \"Approve\")), __jsx(Cell, null, request.complete ? null : __jsx(Button, {\n        basic: true,\n        color: \"pink\",\n        onClick: this.onFinalize\n      }, \"Finalize\")));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(props) {\n        var address;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                address = props.query.address;\n                return _context3.abrupt(\"return\", {\n                  address: address\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function getInitialProps(_x3) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return RequestRow;\n}(Component);\n\nexport default RequestRow;","map":{"version":3,"sources":["/home/anju/sol/kickstart/components/RequestRow.js"],"names":["React","Component","Table","Button","web3","Campaign","Router","RequestRow","event","address","props","eth","getAccounts","accounts","campaign","methods","approveRequest","id","send","from","pushRoute","finalizeRequest","Row","Cell","request","approversCount","readyToFinalize","approvalCount","complete","description","utils","fromWei","value","recepient","onApprove","onFinalize","query"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\nimport {Table,Button} from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport Campaign from '../ethereum/campaign'\nimport { Router } from '../routes'\n\nclass RequestRow extends Component{\n\n    static async getInitialProps(props){\n        const {address}=props.query;\n       \n        return {address};\n    }\n    onApprove=async (event)=>{\n\n        const {address}=this.props;\n        const accounts=await web3.eth.getAccounts();\n        const campaign=Campaign(address);\n        await campaign.methods.approveRequest(this.props.id).send(\n            {\n                from :accounts[0]\n            }\n        )\n\n        Router.pushRoute(`/campaigns/${address}/requests`)\n    \n   }\n\n   onFinalize=async (event)=>{\n\n    const {address}=this.props;\n    const accounts=await web3.eth.getAccounts();\n    const campaign=Campaign(address);\n    await campaign.methods.finalizeRequest(this.props.id).send(\n        {\n            from :accounts[0]\n        }\n    )\n    Router.pushRoute(`/campaigns/${address}/requests`)\n    \n\n}\n\n\n   render(){\n    const {Row,Cell} =Table;\n    const {id,request,approversCount}=this.props;\n    const readyToFinalize=request.approvalCount>(approversCount/2)\n\n\n    return (\n        <Row disabled={request.complete}  positive={readyToFinalize && !request.complete}>\n            <Cell>{id}</Cell>\n            <Cell>{request.description}</Cell>\n            \n            <Cell>{web3.utils.fromWei(request.value,'ether')}</Cell>\n            <Cell>{request.recepient}</Cell>\n            <Cell>{`${request.approvalCount}/${approversCount}`}</Cell>\n           \n            <Cell>{ request.complete? null:(\n                  <Button basic color=\"green\" onClick={this.onApprove}>Approve</Button>)\n                  }\n            </Cell>\n           <Cell>{ request.complete? null:(\n            <Button basic color=\"pink\" onClick={this.onFinalize}>Finalize</Button>)}</Cell>\n            \n           \n          \n\n          \n\n            \n        </Row>\n       \n    )\n\n    }\n\n\n}\nexport default RequestRow;"]},"metadata":{},"sourceType":"module"}