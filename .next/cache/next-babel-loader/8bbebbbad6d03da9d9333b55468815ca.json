{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Layout from '../../../components/layout';\nimport { Button, Table } from 'semantic-ui-react';\nimport { Link } from '../../../routes';\nimport Campaign from '../../../ethereum/campaign';\nimport RequestRow from '../../../components/RequestRow';\n\nclass RequestIndex extends Component {\n  static async getInitialProps(props) {\n    const {\n      address\n    } = props.query;\n    const campaign = Campaign(address);\n    const requestCount = await campaign.methods.getRequestsCount().call();\n    const approversCount = await campaign.methods.approversCount().call(); // console.log(requestCount)\n\n    console.log(Array(requestCount).fill());\n    const requests = await _Promise.all(Array(requestCount).fill().map((element, index) => {\n      console.log(\"index is\", index);\n      console.log(\"elememt is\", element);\n      return campaign.methods.requests(index).call();\n    }));\n    console.log(\"request is\", requests);\n    return {\n      address,\n      requests,\n      requestCount,\n      approversCount\n    };\n  }\n\n  renderRow() {\n    return this.props.requests.map((request, index) => {\n      return __jsx(RequestRow, {\n        key: index,\n        id: index,\n        request: request,\n        address: this.props.address,\n        approversCount: this.props.approversCount\n      });\n    });\n  }\n\n  render() {\n    const {\n      Header,\n      Row,\n      HeaderCell,\n      Body\n    } = Table;\n    return __jsx(Layout, null, __jsx(\"h1\", null, \"Request List\"), __jsx(Link, {\n      route: `/campaigns/${this.props.address}/requests/new`\n    }, __jsx(\"a\", null, __jsx(Button, {\n      primary: true\n    }, \"Add Request\"))), __jsx(Table, null, __jsx(Header, null, __jsx(Row, null, __jsx(HeaderCell, null, \"ID\"), __jsx(HeaderCell, null, \"Desciption\"), __jsx(HeaderCell, null, \"Amount\"), __jsx(HeaderCell, null, \"Recepient\"), __jsx(HeaderCell, null, \"ApprovalCount\"), __jsx(HeaderCell, null, \"Approve\"), __jsx(HeaderCell, null, \"Finalize\"))), __jsx(Body, null, this.renderRow())));\n  }\n\n}\n\nexport default RequestIndex;","map":{"version":3,"sources":["/home/anju/sol/kickstart/pages/campaigns/requests/index.js"],"names":["React","Component","Layout","Button","Table","Link","Campaign","RequestRow","RequestIndex","getInitialProps","props","address","query","campaign","requestCount","methods","getRequestsCount","call","approversCount","console","log","Array","fill","requests","all","map","element","index","renderRow","request","render","Header","Row","HeaderCell","Body"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAAQC,MAAR,EAAeC,KAAf,QAA2B,mBAA3B;AACA,SAAQC,IAAR,QAAmB,iBAAnB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,UAAP,MAAuB,gCAAvB;;AACA,MAAMC,YAAN,SAA4BP,SAA5B,CAAqC;AACjC,eAAaQ,eAAb,CAA6BC,KAA7B,EAAmC;AAC/B,UAAM;AAACC,MAAAA;AAAD,QAAWD,KAAK,CAACE,KAAvB;AACA,UAAMC,QAAQ,GAACP,QAAQ,CAACK,OAAD,CAAvB;AACA,UAAMG,YAAY,GAAE,MAAMD,QAAQ,CAACE,OAAT,CAAiBC,gBAAjB,GAAoCC,IAApC,EAA1B;AACA,UAAMC,cAAc,GAAC,MAAML,QAAQ,CAACE,OAAT,CAAiBG,cAAjB,GAAkCD,IAAlC,EAA3B,CAJ+B,CAKhC;;AACCE,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAK,CAACP,YAAD,CAAL,CAAoBQ,IAApB,EAAZ;AACA,UAAMC,QAAQ,GAAC,MAAM,SAAQC,GAAR,CACjBH,KAAK,CAACP,YAAD,CAAL,CAAoBQ,IAApB,GAA2BG,GAA3B,CAA+B,CAACC,OAAD,EAASC,KAAT,KAAkB;AAC7CR,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBO,KAAvB;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBM,OAAzB;AAEA,aAAOb,QAAQ,CAACE,OAAT,CAAiBQ,QAAjB,CAA0BI,KAA1B,EAAiCV,IAAjC,EAAP;AACH,KALD,CADiB,CAArB;AAQCE,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBG,QAAzB;AACD,WAAO;AAACZ,MAAAA,OAAD;AAASY,MAAAA,QAAT;AAAkBT,MAAAA,YAAlB;AAA+BI,MAAAA;AAA/B,KAAP;AACH;;AACDU,EAAAA,SAAS,GAAE;AACP,WAAO,KAAKlB,KAAL,CAAWa,QAAX,CAAoBE,GAApB,CAAwB,CAACI,OAAD,EAASF,KAAT,KAAiB;AAC3C,aAAO,MAAC,UAAD;AACP,QAAA,GAAG,EAAEA,KADE;AAEP,QAAA,EAAE,EAAEA,KAFG;AAGP,QAAA,OAAO,EAAEE,OAHF;AAIP,QAAA,OAAO,EAAE,KAAKnB,KAAL,CAAWC,OAJb;AAKP,QAAA,cAAc,EAAE,KAAKD,KAAL,CAAWQ;AALpB,QAAP;AAQJ,KATM,CAAP;AAUH;;AAEDY,EAAAA,MAAM,GAAE;AACJ,UAAM;AAACC,MAAAA,MAAD;AAAQC,MAAAA,GAAR;AAAYC,MAAAA,UAAZ;AAAuBC,MAAAA;AAAvB,QAA8B9B,KAApC;AACA,WACA,MAAC,MAAD,QAAQ,iCAAR,EACA,MAAC,IAAD;AAAM,MAAA,KAAK,EAAG,cAAa,KAAKM,KAAL,CAAWC,OAAQ;AAA9C,OACA,iBACA,MAAC,MAAD;AAAQ,MAAA,OAAO;AAAf,qBADA,CADA,CADA,EASA,MAAC,KAAD,QACI,MAAC,MAAD,QACI,MAAC,GAAD,QACI,MAAC,UAAD,aADJ,EAEI,MAAC,UAAD,qBAFJ,EAGI,MAAC,UAAD,iBAHJ,EAII,MAAC,UAAD,oBAJJ,EAKI,MAAC,UAAD,wBALJ,EAMI,MAAC,UAAD,kBANJ,EAOI,MAAC,UAAD,mBAPJ,CADJ,CADJ,EAYI,MAAC,IAAD,QAAO,KAAKiB,SAAL,EAAP,CAZJ,CATA,CADA;AA2BH;;AA7DgC;;AA+DrC,eAAepB,YAAf","sourcesContent":["import React ,{Component} from 'react'\nimport Layout from '../../../components/layout';\nimport {Button,Table} from 'semantic-ui-react';\nimport {Link} from '../../../routes';\nimport Campaign from '../../../ethereum/campaign';\nimport RequestRow from '../../../components/RequestRow'\nclass RequestIndex extends  Component{\n    static async getInitialProps(props){\n        const {address} =props.query;\n        const campaign=Campaign(address);\n        const requestCount =await campaign.methods.getRequestsCount().call();\n        const approversCount=await campaign.methods.approversCount().call();\n       // console.log(requestCount)\n        console.log(Array(requestCount).fill())\n        const requests=await Promise.all(\n            Array(requestCount).fill().map((element,index) =>{ \n                console.log(\"index is\",index)\n                console.log(\"elememt is\",element)\n                \n                return campaign.methods.requests(index).call();\n            })\n        );\n         console.log(\"request is\",requests)\n        return {address,requests,requestCount,approversCount};\n    }\n    renderRow(){\n        return this.props.requests.map((request,index)=>{\n             return <RequestRow\n             key={index}\n             id={index}\n             request={request} \n             address={this.props.address}\n             approversCount={this.props.approversCount}\n             />;\n\n        })\n    }\n\n    render(){\n        const {Header,Row,HeaderCell,Body} =Table;\n        return(\n        <Layout><h1>Request List</h1>\n        <Link route={`/campaigns/${this.props.address}/requests/new`}>\n        <a>\n        <Button primary>\n            Add Request\n        </Button>\n        </a>\n        </Link>\n\n        <Table> \n            <Header>\n                <Row>\n                    <HeaderCell>ID</HeaderCell>\n                    <HeaderCell>Desciption</HeaderCell>\n                    <HeaderCell>Amount</HeaderCell>\n                    <HeaderCell>Recepient</HeaderCell>\n                    <HeaderCell>ApprovalCount</HeaderCell>\n                    <HeaderCell>Approve</HeaderCell>\n                    <HeaderCell>Finalize</HeaderCell>\n                    </Row>\n            </Header>\n            <Body>{this.renderRow()}</Body>\n            </Table>\n        </Layout>\n        )\n\n    }\n}\nexport default RequestIndex;"]},"metadata":{},"sourceType":"module"}