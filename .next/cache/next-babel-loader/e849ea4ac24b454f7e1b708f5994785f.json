{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Form, Button, Message, Input } from 'semantic-ui-react';\nimport Campaign from '../../../ethereum/campaign';\nimport web3 from '../../../ethereum/web3';\nimport { Link, Router } from '../../../routes';\nimport Layout from '../../../components/layout';\n\nclass RequestNew extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      value: '',\n      description: '',\n      recipient: '',\n      errorMessage: '',\n      loading: false\n    });\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      const campaign = Campaign(this.props.address);\n      const accounts = await web3.eth.getAccounts();\n      this.setState({\n        loading: true,\n        errorMessage: ''\n      });\n\n      try {\n        await campaign.methods.createRequest(this.state.description, web3.utils.toWei(this.state.value, 'ether'), this.state.recipient).send({\n          from: accounts[0]\n        });\n        Router.pushRoute(`/campaigns/${this.props.address}/requests`);\n      } catch (err) {\n        this.setState({\n          errorMessage: err.message\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  static async getInitialProps(props) {\n    const {\n      address\n    } = props.query;\n    return {\n      address\n    };\n  }\n\n  render() {\n    return __jsx(Layout, null, __jsx(Link, {\n      route: `/campaigns/${this.props.address}/requests`\n    }, __jsx(\"a\", null, \"Back\")), __jsx(\"h1\", null, \"Create A Request\"), __jsx(Form, {\n      onSubmit: this.onSubmit,\n      error: !!this.state.errorMessage\n    }, __jsx(Form.Field, null, __jsx(\"label\", null, \"Description\"), __jsx(Input, {\n      value: this.state.description,\n      onChange: event => {\n        this.setState({\n          description: event.target.value\n        });\n      }\n    })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Value in ether\"), __jsx(Input, {\n      value: this.state.value,\n      onChange: event => {\n        this.setState({\n          value: event.target.value\n        });\n      }\n    })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Recipient\"), __jsx(Input, {\n      value: this.state.recipient,\n      onChange: event => {\n        this.setState({\n          recipient: event.target.value\n        });\n      }\n    })), __jsx(Message, {\n      error: true,\n      header: \"oops!!!\",\n      content: this.state.errorMessage\n    }), __jsx(Button, {\n      primary: true,\n      loading: this.state.loading\n    }, \" Create! \")));\n  }\n\n}\n\nexport default RequestNew;","map":{"version":3,"sources":["/home/anju/sol/kickstart/pages/campaigns/requests/new.js"],"names":["React","Component","Form","Button","Message","Input","Campaign","web3","Link","Router","Layout","RequestNew","value","description","recipient","errorMessage","loading","event","campaign","props","address","accounts","eth","getAccounts","setState","methods","createRequest","state","utils","toWei","send","from","pushRoute","err","message","getInitialProps","query","render","onSubmit","target"],"mappings":"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","sourcesContent":["import React ,{Component} from 'react';\nimport {Form,Button,Message,Input} from 'semantic-ui-react';\nimport Campaign from '../../../ethereum/campaign';\nimport web3 from '../../../ethereum/web3';\nimport {Link,Router} from '../../../routes';\nimport Layout from '../../../components/layout';\n\n\nclass RequestNew extends Component{\n    state={\n        value:'',\n        description:'',\n        recipient:'',\n        errorMessage:'',\n        loading:false\n\n    }\n    static async getInitialProps(props){\n        const {address}=props.query;\n       \n        return {address};\n    }\n   \n   onSubmit=async (event)=>{\n       const campaign=Campaign(this.props.address);\n       const accounts=await web3.eth.getAccounts();\n       this.setState({loading:true,errorMessage:''})\n      try{\n            await campaign.methods.createRequest(\n            this.state.description,\n            web3.utils.toWei(this.state.value,'ether'),\n            this.state.recipient)\n            .send({\n          from :accounts[0],\n         \n      }\n      )\n     Router.pushRoute(`/campaigns/${this.props.address}/requests`)\n    }catch(err){\n        this.setState({errorMessage:err.message})\n\n\n    }\n    this.setState({loading:false})\n\n\n   }\n\n    render(){\n        return(\n            <Layout>\n                <Link route={`/campaigns/${this.props.address}/requests`}>\n                <a>Back</a>\n                </Link>\n             <h1>Create A Request</h1>\n             <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n                    <Form.Field>\n                     <label>Description</label>\n                     <Input\n                     value={this.state.description}\n                     onChange={(event)=>{this.setState({description:event.target.value})}}\n                     />\n                     </Form.Field>\n\n                    <Form.Field>\n                     <label>Value in ether</label>\n                     <Input\n                     value={this.state.value}\n                     onChange={(event)=>{this.setState({value:event.target.value})}}\n                     />\n                     </Form.Field>\n\n                    <Form.Field>\n                     <label>Recipient</label>\n                     <Input\n                     value={this.state.recipient}\n                     onChange={(event)=>{this.setState({recipient:event.target.value})}}\n                     />\n                     </Form.Field>\n                     <Message error header=\"oops!!!\" content={this.state.errorMessage}/>\n                     <Button primary loading={this.state.loading}> Create! </Button>\n             </Form>\n             </Layout>\n\n\n        )\n\n    };\n}\nexport default RequestNew;"]},"metadata":{},"sourceType":"module"}