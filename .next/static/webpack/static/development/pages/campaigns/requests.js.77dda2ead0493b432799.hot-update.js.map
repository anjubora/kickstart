{"version":3,"file":"static/webpack/static/development/pages/campaigns/requests.js.77dda2ead0493b432799.hot-update.js","sources":["webpack:///./pages/campaigns/requests/index.js"],"sourcesContent":["import React ,{Component} from 'react'\nimport Layout from '../../../components/layout';\nimport {Button,Table} from 'semantic-ui-react';\nimport {Link} from '../../../routes';\nimport Campaign from '../../../ethereum/campaign';\nimport RequestRow from '../../../components/RequestRow'\nclass RequestIndex extends  Component{\n    static async getInitialProps(props){\n        const {address} =props.query;\n        const campaign=Campaign(address);\n        const requestCount =await campaign.methods.getRequestsCount().call();\n        const approversCount=await campaign.methods.approversCount().call();\n       // console.log(requestCount)\n        console.log(Array(parseInt(requestCount)).fill())\n        const requests=await Promise.all(\n            Array(parseInt(requestCount)).fill().map((element,index) =>{ \n                console.log(\"index is\",index)\n                console.log(\"elememt is\",element)\n                \n                return campaign.methods.requests(index).call();\n            })\n        );\n         console.log(\"request is\",requests)\n        return {address,requests,requestCount,approversCount};\n    }\n    renderRow(){\n        return this.props.requests.map((request,index)=>{\n             return <RequestRow\n             key={index}\n             id={index}\n             request={request} \n             address={this.props.address}\n             approversCount={this.props.approversCount}\n             />;\n\n        })\n    }\n\n    render(){\n        const {Header,Row,HeaderCell,Body} =Table;\n        return(\n        <Layout><h1>Request List</h1>\n        <Link route={`/campaigns/${this.props.address}/requests/new`}>\n        <a>\n        <Button primary floated=\"right\" style={{marginButton:'10px'}}>\n            Add Request\n        </Button>\n        </a>\n        </Link>\n\n        <Table> \n            <Header>\n                <Row>\n                    <HeaderCell>ID</HeaderCell>\n                    <HeaderCell>Desciption</HeaderCell>\n                    <HeaderCell>Amount</HeaderCell>\n                    <HeaderCell>Recepient</HeaderCell>\n                    <HeaderCell>ApprovalCount</HeaderCell>\n                    <HeaderCell>Approve</HeaderCell>\n                    <HeaderCell>Finalize</HeaderCell>\n                    </Row>\n            </Header>\n            <Body>{this.renderRow()}</Body>\n            </Table>\n            <div>Found {this.props.requestCount} Requests.</div>\n        </Layout>\n        )\n\n    }\n}\nexport default RequestIndex;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;AAmBA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA;;;;;;AA7DA;;;;;;AACA;AACA;;AACA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AACA;;AACA;AAEA;AACA;AAEA;AACA;AACA;;AAPA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAlBA;AACA;AA+DA;;;;A","sourceRoot":""}